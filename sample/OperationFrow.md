```uml 
@startuml 

headar メイン処理

 opt 未登録

  ユーザー -> Webサーバー:ユーザー登録
  Webサーバー -> DBサーバー:ユーザー登録
  DBサーバー -> DBサーバー:登録処理

  alt 登録成功
    Webサーバー ->ユーザー:登録メッセージの表示
  else 登録失敗
    Webサーバー ->ユーザー:失敗メッセージの表示
  end

 end

 ユーザー -> Webサーバー:ログイン
 Webサーバー -> DBサーバー:ログイン
 DBサーバー -> DBサーバー:ログイン処理および認証
 DBサーバー -> Webサーバー:認証結果

 alt 認証失敗
  Webサーバー ->ユーザー:失敗メッセージの表示
 end
    
end
 

ユーザー -> Webサーバー:カート投入



  
  alt キャンセル有り
      Webサーバー ->ユーザー:対象物削除
    else キャンセル無し
  end
  
  opt カート情報更新
      ユーザー -> Webサーバー:更新申請
      Webサーバー ->ユーザー:内容更新
  end
  
Webサーバー -> DBサーバー:カート情報
DBサーバー -> DBサーバー:購入処理
DBサーバー -> Webサーバー:購入情報
Webサーバー ->ユーザー:購入メッセージの表示

 

Webサーバー -> DBサーバー:ログアウト
DBサーバー -> DBサーバー:ログアウト
DBサーバー -> Webサーバー:ログイン処理
Webサーバー ->ユーザー:ログアウトメッセージ表示

@enduml
```

```uml
@startuml
Webサーバー2 -> DBサーバー2:ログアウト
@enduml
```
